<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Retrieve and parse XML data using JavaScript &middot; Shivaji Varma</title><!-- Enable responsiveness on mobile devices--><meta name=viewport content="width=device-width, initial-scale=1"><!-- Page meta data --><meta name=author content="Shivaji Varma"><meta name=copyright content="(c) 2014 Shivaji Varma"><meta property=og:url content="http://shivajivarma.com/blog/programming/2014/03/17/retrieve-and-parse-xml-using-javascript/"><meta property=og:type content=""><meta property=og:image content=http://shivajivarma.com/assets/img/author-bw.jpg><meta property=og:site_name content="Shivaji Varma"><meta property=fb:admins content=100002868559363><meta property=og:title content="Retrieve and parse XML data using JavaScript &middot; Shivaji Varma"><meta name=description property=og:description content="Retrieve and parse XML data using JavaScript"><meta name=keywords content="Shivaji Varma,xml,ajax,javascript,retrieve xml,fetch xml,parse xml"><!-- RSS ><link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"--><!-- Icons --><link rel="shortcut icon" type=image/png href=/favicon.png><link rel=author href="https://plus.google.com/116941078508380009042?rel=author"><link rel=publisher href=https://plus.google.com/+ShivajivarmaDotCom><!-- Latest compiled css, includes bootstrap and prismjs --><link rel=stylesheet href=/assets/css/global.a8c6.css><link rel=stylesheet href=/assets/css/main.cc08.css media=screen><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --><!-- WARNING: Respond.js doesn't work if you view the page via file:// --><!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]--><script src=/assets/js/global.8b87.js></script></head><body><!-- Fixed navbar --><header id=header class="navbar navbar-default navbar-fixed-top" role=navigation itemscope itemtype=http://schema.org/WPHeader><nav class=container itemscope itemtype=http://schema.org/SiteNavigationElement><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=/#><img alt=Logo title=Logo src=/assets/img/logo.1ef9.png></a></div><!--/.nav-header --><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown itemprop=url><i class="fa fa-pencil margin-right-5px"></i><span itemprop=name>Blog</span> <b class=caret></b></a><ul class=dropdown-menu><li><a href=/blog/# itemprop=url><i class="fa fa-archive margin-right-5px"></i><span itemprop=name>Archives</span></a></li><li><a href=/blog/categories/# itemprop=url><i class="fa fa-list margin-right-5px"></i><span itemprop=name>Categaries</span></a></li><li><a href=/blog/tags/# itemprop=url><i class="fa fa-tags margin-right-5px"></i><span itemprop=name>Tags</span></a></li></ul></li><!--li ><a href="/blog/#" itemprop="url"><span itemprop="name">Blog</span></a></li--><li><a href=/project/# itemprop=url><i class="fa fa-code margin-right-5px"></i><span itemprop=name>Projects</span></a></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=/about/# itemprop=url><span itemprop=name>About</span></a></li></ul></div><!--/.nav-collapse --></nav></header><!--/.navbar --><div id=content><!-- Breadcrumb --><ol class="breadcrumb container margin-top-10px" itemscope itemtype=http://schema.org/Breadcrumb><li><a href="/" itemprop=url><span itemprop=title>Home</span></a></li><li><a href="/blog/" itemprop=url><span itemprop=title>Blog</span></a></li><li class=active itemprop=title>Retrieve and parse XML data using JavaScript</li></ol><div class=container><h1 class=no-margin>Retrieve and parse XML data using JavaScript</h1><p><small class=text-muted>Posted on March 17, 2014 by <a href="https://plus.google.com/116941078508380009042?rel=author" rel=author>Shivaji Varma</a></small></p><p>Program to fecth XML. And Sample code to demonstrate the process of parsing the XML data. Also look out for <a href=#demo>demo</a> at bottom of this page.</p><h3>Code</h3><pre><code class=language-javascript>/* Function to fecth XML at given path */
function loadXML(xmlpath) {
	var xmlhttp;
	var xmlDoc;
	if (window.XMLHttpRequest) {
		xmlhttp = new XMLHttpRequest();
	} else {
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET", xmlpath, false);
	xmlhttp.send();
	xmlDoc = xmlhttp.responseXML;
	return xmlDoc;
}</code></pre><h3>Sample XML parsing code</h3><pre><code class=language-javascript>/* Sample code to fecth and parse below XML. */

xml = loadXML("/assets/xml/students.xml");
$(document).ready(funtion(){
	parseXML(xml);
});

function parseXML(xml) {
	$(xml).find('student').each(function(){
        console.log('/*************************************/');
        console.log('ID: '+$(this).attr('id'));
        console.log('Name: '+$(this).find('name').text());
        console.log('Age: '+$(this).find('age').text());
        
            $(this).find('major').each(function(){
               console.log('Major: '+$(this).text());
            });
    
			$(this).find('results').find('result').each(function(){
                console.log('Result:\n\t Course: '+$(this).attr('course')+'\n\t Grade: '+$(this).attr('grade'));
            });
        
		console.log('/*************************************/');
        
	});
}</code></pre><pre><code class=language-javascript>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;students&gt;
  &lt;student id="100026"&gt;
    &lt;name&gt;Joe Average&lt;/name&gt;
    &lt;age&gt;21&lt;/age&gt;
    &lt;major&gt;Biology&lt;/major&gt;
    &lt;results&gt;
      &lt;result course="Math 101" grade="C-"/&gt;
      &lt;result course="Biology 101" grade="C+"/&gt;
      &lt;result course="Statistics 101" grade="D"/&gt;
    &lt;/results&gt;
  &lt;/student&gt;
  &lt;student id="100078"&gt;
    &lt;name&gt;Jack Doe&lt;/name&gt;
    &lt;age&gt;18&lt;/age&gt;
    &lt;major&gt;Physics&lt;/major&gt;
    &lt;major&gt;XML Science&lt;/major&gt;
    &lt;results&gt;
      &lt;result course="Math 101" grade="A"/&gt;
      &lt;result course="XML 101" grade="A-"/&gt;
      &lt;result course="Physics 101" grade="B+"/&gt;
      &lt;result course="XML 102" grade="A"/&gt;
    &lt;/results&gt;
  &lt;/student&gt;
&lt;/students&gt;</code></pre><h3>Demo<a id=demo class=anchor></a></h3><div><form role=form name=SumCalculator><p><a id=xmlBtn data-state=fetch class="btn btn-default btn-sm" href=javascript:void(0)><span>Fetch</span> <i class="fa fa-cog"></i></a><i class="fa fa-hand-o-left margin-left-10px margin-right-10px"></i><span class=note>Click here to fetch XML</span></p></form></div><div class=output><div class=data></div></div><script type=text/javascript>var xml;
var xmlpath = "/assets/xml/students.xml";
var backup={};
$('#xmlBtn').click(function(){
	if($(this).attr("data-state") == "fetch"){
	    backup.output = $('.output').html();
		backup.btn = $(this).html();
		$('.output').append('<pre><code class="language-markup"></code></pre>');
		$('#xmlBtn .fa').addClass('fa-spin');
		xml = loadXML(xmlpath);
		loadText(xmlpath);
		$('.note').html('Fetched successfully. Reclick to parse the data.');
	}else if($(this).attr("data-state") == "parse"){
		$(xml).find('student').each(function(){
				$('.output .data').append('<div class="panel panel-primary"><div class="panel-heading">ID: '+$(this).attr('id')+'</div><div class="panel-body"><p>Name: '+$(this).find('name').text()+'</p><p>Age: '+$(this).find('age').text()+'</p></div></div>');
				
		});
		$(this).children('span').html('Parse more');
		$(this).attr("data-state","more");
		$('.note').html("Student's name and age are parsed. Reclick to parse more the data.");
	}else if($(this).attr("data-state") == "more"){
		$(xml).find('student').each(function(i,data){
				$(this).find('major').each(function(){
					$('.output .data .panel-body:eq('+i+')').append('<p>Major: '+$(this).text()+'</p>');
				});
				$(this).find('results').find('result').each(function(){
					$('.output .data .panel-body:eq('+i+')').append('<p>Result:<br>&nbsp;&nbsp; Course: '+$(this).attr('course')+'<br>&nbsp;&nbsp; Grade: '+$(this).attr('grade')+'</p>');
				});
		});
		$(this).html('Try again');
		$(this).attr("data-state","end");
		$('.note').html("Now each student's full details are parsed");
	}else if($(this).attr("data-state") == "end"){
		$(this).html(backup.btn);
		$('.output').html(backup.output);
		$(this).attr("data-state","fetch");
		$('.note').html("Click here to fetch XML");
	}
});

function loadXML(xmlpath) {
	var xmlhttp;
	var xmlDoc;
	if (window.XMLHttpRequest) {
		xmlhttp = new XMLHttpRequest();
	} else {
		xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET", xmlpath, false);
	xmlhttp.send();
	xmlDoc = xmlhttp.responseXML;
	
	$('#xmlBtn').attr('data-state','parse').children('span').html('Parse the data');
	return xmlDoc;
}
	
function loadText(filepath){
	$.ajax({
		url : filepath,
		dataType: "text",
		success : function (data) {
			$('.output code').text(data);
			Prism.highlightAll();
		}
    });
}</script></div><div class=container><div id=page-navigation><div class=clear>&nbsp;</div><div class=pull-left><a href="/blog/music/2014/02/28/naruto-theme/" title="Previous Post: Naruto Theme">&laquo; Naruto Theme</a></div><div class=pull-right><a href="/blog/music/2014/03/23/let-it-go-frozen/" title="Previous Post: Disney's Frozen [Let It Go] Sequence Performed by Idina Menzel">Disney's Frozen [Let It Go] Sequence Performed by Idina Menzel &raquo;</a></div><div class=clear>&nbsp;</div></div></div><!-- comments --><div id=comments class="container margin-bottom-10px"><div id=disqus_thread></div><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=# class=dsq-brlink>loading comments...</a></div><div id=push></div></div><!-- Footer --><div id=footer class=border-top><footer class=container itemscope itemtype=http://schema.org/WPFooter><p class=pull-right><a href=#>Back to top</a></p><p>&copy; 2014 shivajivarma &middot; <a href=/pages/privacy>Privacy</a> &middot; <a href=#>Terms</a> &middot; <a href=/pages/LICENSE>License</a></p><p class=no-margin>Built by <a target=_blank href="https://plus.google.com/116941078508380009042?rel=author" rel=author>Shivaji Varma</a>. Based on <a target=_blank href=http://getbootstrap.com>Bootstrap</a>. Web fonts from <a target=_blank href=http://www.google.com/webfonts>Google</a>. View source on <a target=_blank href=http://github.com/shivajivarma/shivajivarma.github.io>Github</a></p></footer></div><script src=/assets/js/main.9108.js></script><script type=text/javascript>var disqus_shortname = 'shivajivarma'; // required: replace example with your forum shortname

	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();</script><!--ANALYTICS CODE--><script type=text/javascript>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-42422649-1', 'shivajivarma.com');
 ga('send', 'pageview');</script><!--/ANALYTICS CODE--></body></html>