<!DOCTYPE html>
<html lang="en">
    
	<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PHP - fetching file behind a proxy &middot; Shivaji Varma</title>

  <!-- Page meta data -->
  <meta name="author" content="Shivaji Varma">
  <meta name="copyright" content="(c) 2017 Shivaji Varma">
  <meta property="og:url" content="http://shivajivarma.com/blog/programming/2014/10/27/file-get-contents-behind-a-proxy-in-php/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="http://shivajivarma.com/assets/img/profile.jpg">
  <meta property="og:site_name" content="Shivaji Varma">
  <meta property="fb:admins" content="100002868559363">

  <meta property="og:title" content="PHP - fetching file behind a proxy &middot; Shivaji Varma">
  <meta name="description"  property="og:description" content="Fetching file behind proxy setting using file_get_contents function in PHP">
  <meta name="keywords" content="Shivaji Varma, php, file_get_contents, proxy, fetch file behind proxy">

	<!-- RSS ><link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"-->
	<!-- Icons -->
	<link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png">
	<link rel="author" href="https://plus.google.com/108142170241252227550?rel=author">
	<link rel="publisher" href="https://plus.google.com/+ShivajivarmaDotCom">
	<link rel="canonical" href="http://shivajivarma.com/blog/programming/2014/10/27/file-get-contents-behind-a-proxy-in-php/">
	<link rel="alternate" type="application/rss+xml" title="Shivaji Varma" href="http://shivajivarma.com/feed.xml">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
	<link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.0.0-beta.4/dist/css/bootstrap-material-design.min.css" integrity="sha384-R80DC0KVBO4GSTw+wZ5x2zn2pu4POSErBkf8/fSFhPXHxvHJydT0CSgAP2Yo2r4I" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="/assets/bower_components/prism/themes/prism.css">
	<link rel="stylesheet" type="text/css" href="/assets/bower_components/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/assets/bower_components/owl-carousel/owl.carousel.css">		
	<link rel="stylesheet" type="text/css" href="/assets/bower_components/owl-carousel/owl.theme.css">

	<link rel="stylesheet" type="text/css" media="screen" href="/assets/css/main.css">
	<link rel="stylesheet" type="text/css" media="screen" href="/assets/css/import.css">

	
	<style type="text/css">
		
	</style>

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->

	<script type="text/javascript" src="/assets/bower_components/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

</head>

    
	<body id=body itemscope itemtype="http://schema.org/WebPage">
	<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5BRS3L"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5BRS3L');</script>
<!-- End Google Tag Manager -->
		
		<!-- Fixed navbar -->
<header id=header itemscope itemtype="http://schema.org/WPHeader">
<nav class="navbar navbar-expand-lg navbar-dark">
  <a class="navbar-brand" href="/#body">
    <img src="/assets/img/logo2.png" height="30" class="d-inline-block align-top" alt="">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item ">
        <a class="nav-link" href="/blog/#body" itemprop=url>
			<i class="fa fa-pencil margin-right-5px"></i>
			<span itemprop=name>Blog</span> 
		</a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" href="/project/#body" itemprop=url>
			<i class="fa fa-code margin-right-5px"></i>
			<span itemprop=name>Projects</span> 
		</a>
      </li>
      <li class="nav-item ">
        <a class="nav-link" href="/code-base/#body" itemprop=url>
			<i class="fa fa-terminal margin-right-5px"></i>
			<span itemprop=name>Code Base</span> 
		</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0" action="/search/" role="search">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" name="q" id="q">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
</header><!--/.navbar -->


<div id="content">
	<ol class="breadcrumb container-fluid capitalize d-none d-sm-block" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li class="breadcrumb-item" itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem"><a href="/" itemprop="item" title="Home"><span itemprop="name">Home</span></a></li>
  <li class="breadcrumb-item" itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem"><a href="/blog/" itemprop="item" title="blog"><span itemprop="name">blog</span></a></li>
  
  <li class="breadcrumb-item" itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem"><a href="/blog/programming/" itemprop="item" title="programming"><span itemprop="name">programming</span></a></li>
  
  <li class="breadcrumb-item active" itemprop="itemListElement" itemscope
      itemtype="http://schema.org/ListItem" class="active" title="PHP - fetching file behind a proxy"><span itemprop=name>PHP - fetching file behind a proxy</span></li>
</ol><!-- /.breadcrumb -->
<div class="margin-top-10px  visible-xs"></div>
<article class=container-fluid itemscope itemtype="http://schema.org/Article">
	<h1 class=no-margin itemprop=name>PHP - fetching file behind a proxy</h1>
	<p>
  <small class=text-muted>Posted on October 27, 2014 by <a href="https://plus.google.com/108142170241252227550?rel=author" rel="author"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span  itemprop="name">Shivaji Varma</span></span></a></small>
</p>
	<div class=row>
		<div class=col-md-9>
			<p itemprop=articleBody>To use file_get_content over/through a Proxy that doesn't require Authentication, something like this should do:</p>

<h4>Without Authentication</h4>
<pre><code class=language-php>//Proxy bypass code
&lt;?php
 // Define the default, system-wide context.
 $r_default_context = stream_context_get_default
 (
  array
     (
     'http' =&gt; array
      ( // All HTTP requests are passed through the local NTLM proxy server on port 8080.Change the proxy IP as required.
          'proxy' =&gt; 'tcp://192.168.23.32:3128',
          'request_fulluri' =&gt; True
      ),
     )
 );
 
// Though we said system wide, some extensions need a little coaxing.
 libxml_set_streams_context($r_default_context);
?&gt;
 
//fetching data
&lt;?php
   $var = file_get_contents("http://www.example.com/file.txt");
?&gt;</code></pre>
<p>If authentication is required. Then pass login details as well.</p>
<h4>With Authentication</h4>
<pre><code class=language-php>//Proxy bypass code
&lt;?php
 // Define login details
 $auth = base64_encode('USERID:PASSWORD');

 // Define the default, system-wide context.
 $r_default_context = stream_context_get_default
 (
  array
     (
     'http' =&gt; array
      ( // All HTTP requests are passed through the local NTLM proxy server on port 8080.Change the proxy IP as required.
          'proxy' =&gt; 'tcp://192.168.23.32:3128',
          'request_fulluri' =&gt; True,
		  'header' => "Proxy-Authorization: Basic $auth" //Here you are passing login details
      ),
     )
 );
 
// Though we said system wide, some extensions need a little coaxing.
 libxml_set_streams_context($r_default_context);
?&gt;
 
//fetching data
&lt;?php
   $var = file_get_contents("http://www.example.com/file.txt");
?&gt;</code></pre>
			<ul class=pager> 
			
			
				<li class="previous">
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
						<a href="/blog/programming/2014/10/25/retrieve-and-parse-xml-using-python/" title="Previous Post: Retrieve and parse XML data using Python [AJAX]">Previous</a>
						 
				</li> 
				
				
				<li class="next"> 
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
					
				
				
				
					
						<a href="/blog/stories/2014/10/27/relationship/" title="Previous Post: Relationship &ndash; Short Story">Next</a>
						 
				</li>
			</ul>
		</div>
		<div class=col-md-3>
			<div class="ads padding-5px">
	
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- Responsive -->
	<ins class="adsbygoogle"
		 style="display:block"
		 data-ad-client="ca-pub-3120721550776061"
		 data-ad-slot="8584695641"
		 data-ad-format="auto"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	
</div>

<div id="adblocker-message">
  This website is made possible by displaying online advertisements to our visitors.<br>
  Please consider supporting by disabling your ad blocker.
</div>
		</div>
	</div>
</article>
<!-- comments -->
<div id="comments" class="container-fluid margin-bottom-10px">
<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="#" class="dsq-brlink">loading comments...</a>
</div>
	<div id="push"></div>
</div>
<div id="footer" class="border-top">  
  <footer class="container-fluid" itemscope itemtype="http://schema.org/WPFooter">
    <p class=back-to-top><a href="#body"><i class="fa fa-angle-up font-32px"></i></a></p>
    <p>
		ALL WORKS &copy; 2017 <a target="_blank" href="https://plus.google.com/108142170241252227550?rel=author" rel="author">SHIVAJI VARMA</a> &middot; <a href="/privacy">PRIVACY</a> &middot; <a href="#body">TERMS</a> &middot; <a href="/LICENSE">LICENSE</a>
	</p>
    <p class=no-margin>
		Based on <a target="_blank" href="http://getbootstrap.com">Bootstrap</a>. 
		Web fonts from <a target="_blank" href="http://www.google.com/webfonts">Google</a>. 
		View source on <a target="_blank" href="http://github.com/shivajivarma/shivajivarma.github.io">Github</a>
	</p>
  </footer>
</div><!-- /#footer -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
<script src="https://unpkg.com/bootstrap-material-design@4.0.0-beta.4/dist/js/bootstrap-material-design.js" integrity="sha384-3xciOSDAlaXneEmyOo0ME/2grfpqzhhTcM4cE32Ce9+8DW/04AGoTACzQpphYGYe" crossorigin="anonymous"></script>
<!-- build:js(app) /assets/js/main.js -->
<script type="text/javascript" src="/assets/bower_components/prism/prism.js"></script>
<script type="text/javascript" src="/assets/bower_components/prism/components/prism-c.min.js"></script>
<script type="text/javascript" src="/assets/bower_components/prism/components/prism-python.min.js"></script>
<script type="text/javascript" src="/assets/bower_components/prism/components/prism-sql.min.js"></script>
<script type="text/javascript" src="/assets/bower_components/prism/components/prism-java.min.js"></script>
<script type="text/javascript" src="/assets/bower_components/owl-carousel/owl.carousel.min.js"></script>
<script src="/assets/js/main.js"></script>
<!-- endbuild -->
<script type="text/javascript">
	
</script>









<!--DISQUS COMMENTS-->
<script type="text/javascript">
	var disqus_shortname = 'shivajivarma'; // required: replace example with your forum shortname
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script><!--/DISQUS COMMENTS-->

		
		<!--GOOGLE ANALYTICS CODE-->
<script type="text/javascript">
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-42422649-1', 'shivajivarma.com');
 ga('send', 'pageview');
</script><!--/GOOGLE ANALYTICS CODE-->
	</body>
</html>